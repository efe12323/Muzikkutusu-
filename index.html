<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<title>üéß M√ºzik Kutusu</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">

<style>
:root{
  --green:#1db954;
  --dark:#121212;
  --card:#181818;
  --text:#eee;
  --gray:#777;
}

*{box-sizing:border-box;font-family:Poppins,sans-serif}

body{
  margin:0;
  background:var(--dark);
  color:var(--text);
}

header{
  padding:20px;
  text-align:center;
}

.logo{
  font-size:36px;
  font-weight:700;
  letter-spacing:2px;
  color:var(--green);
  animation: pulse 4s infinite;
}

@keyframes pulse{
  0%{transform:scale(1);}
  50%{transform:scale(1.06);}
  100%{transform:scale(1);}
}

.subtitle{
  color:var(--gray);
  margin-top:5px;
}

/* Categories */
.categories{
  display:flex;
  overflow-x:auto;
  gap:10px;
  padding:10px 15px;
}

.category{
  background:#222;
  padding:8px 16px;
  border-radius:20px;
  cursor:pointer;
  white-space:nowrap;
  transition:.3s;
}

.category:hover, .category.active{
  background:var(--green);
  color:black;
}

/* Music Grid */
.container{
  padding:20px;
  display:grid;
  grid-template-columns:repeat(auto-fill,minmax(160px,1fr));
  gap:20px;
}

.music-card{
  background:var(--card);
  border-radius:16px;
  padding:15px;
  transition:.3s;
  position:relative;
}

.music-card:hover{
  transform:translateY(-7px);
}

.music-card img{
  width:100%;
  border-radius:12px;
  height:150px;
  object-fit:cover;
}

.music-title{
  margin:10px 0 0;
  font-size:15px;
  font-weight:600;
}

.play-btn{
  margin-top:10px;
  width:100%;
  background:var(--green);
  border:none;
  padding:8px;
  border-radius:20px;
  cursor:pointer;
  font-weight:600;
}

/* Player */
.player{
  position:fixed;
  bottom:70px;
  left:0;
  right:0;
  background:#000;
  padding:10px;
  display:none;
}

/* Admin Button */
.admin-btn{
  position:fixed;
  bottom:0;
  left:0;
  width:100%;
  padding:12px;
  border:0;
  background:var(--green);
  color:black;
  font-weight:bold;
  cursor:pointer;
}

/* ADMIN PANEL */
.admin-panel{
  display:none;
  background:#000;
  padding:20px;
}

.admin-panel h2{
  text-align:center;
}

.admin-panel input, select{
  width:100%;
  margin-bottom:10px;
  padding:8px;
  border-radius:8px;
  border:none;
}

.admin-panel button{
  padding:10px;
  width:100%;
  border:none;
  background:var(--green);
  font-weight:600;
  cursor:pointer;
}

.music-actions{
  display:flex;
  gap:5px;
  margin-top:10px;
}

.music-actions button{
  flex:1;
  background:#222;
  color:white;
  border-radius:10px;
}
</style>
</head>
<body>

<header>
  <div class="logo">üéµ M√úZƒ∞K KUTUSU</div>
  <div class="subtitle">Spotify tarzƒ± m√ºzik platformu</div>
</header>

<div class="categories" id="categoryList">
  <div class="category active" onclick="filterCategory('t√ºm√º')">T√ºm√º</div>
  <div class="category" onclick="filterCategory('pop')">Pop</div>
  <div class="category" onclick="filterCategory('rap')">Rap</div>
  <div class="category" onclick="filterCategory('rock')">Rock</div>
  <div class="category" onclick="filterCategory('lofi')">Lo-Fi</div>
  <div class="category" onclick="filterCategory('game')">Game</div>
  <div class="category" onclick="filterCategory('sad')">Sad</div>
  <div class="category" onclick="filterCategory('energy')">Energy</div>
</div>

<div class="container" id="musicContainer"></div>

<div class="player" id="playerBox">
  <audio id="player" controls style="width:100%"></audio>
</div>

<!-- ADMIN -->
<div class="admin-panel" id="adminPanel">
  <h2>üîê Admin Panel</h2>

  <input type="text" id="title" placeholder="M√ºzik Adƒ±">
  <select id="category">
    <option value="pop">Pop</option>
    <option value="rap">Rap</option>
    <option value="rock">Rock</option>
    <option value="lofi">Lo-Fi</option>
    <option value="sad">Sad</option>
    <option value="game">Game</option>
    <option value="energy">Energy</option>
  </select>

  <label>Kapak Fotoƒürafƒ±</label>
  <input type="file" id="cover">

  <label>M√ºzik Dosyasƒ±</label>
  <input type="file" id="music">

  <button onclick="uploadMusic()">M√ºziƒüi Y√ºkle</button>
</div>

<button class="admin-btn" onclick="toggleAdmin()">Admin Paneli A√ß / Kapat</button>

<script>
const CLOUD_NAME = "dq4iighak";
const UPLOAD_PRESET = "muzikkutusu";

let musics = JSON.parse(localStorage.getItem("musicData")) || [];

function saveMusics(){
  localStorage.setItem("musicData", JSON.stringify(musics));
}

function renderMusics(filter="t√ºm√º"){
  const container = document.getElementById("musicContainer");
  container.innerHTML = "";

  musics
    .filter(m => filter==="t√ºm√º" || m.category===filter)
    .forEach((m,index)=>{
      container.innerHTML += `
      <div class="music-card">
        <img src="${m.cover}">
        <div class="music-title">${m.title}</div>
        <button class="play-btn" onclick="playMusic('${m.url}')">‚ñ∂ OYNAT</button>

        <div class="music-actions">
          <button onclick="deleteMusic(${index})">üóë</button>
          <button onclick="editMusic(${index})">‚úè</button>
        </div>
      </div>
      `;
    })
}

function playMusic(url){
  const playerBox = document.getElementById("playerBox");
  const player = document.getElementById("player");

  player.src = url;
  playerBox.style.display = "block";
  player.play();
}

function filterCategory(cat){
  document.querySelectorAll(".category").forEach(c=>c.classList.remove("active"));
  event.target.classList.add("active");
  renderMusics(cat);
}

function toggleAdmin(){
  const panel = document.getElementById("adminPanel");
  panel.style.display = panel.style.display === "block" ? "none" : "block";
}

async function uploadFile(file){
  const form = new FormData();
  form.append("file",file);
  form.append("upload_preset",UPLOAD_PRESET);

  const res = await fetch(`https://api.cloudinary.com/v1_1/${CLOUD_NAME}/auto/upload`,{
    method:"POST",
    body:form
  });

  const data = await res.json();
  return data.secure_url;
}

async function uploadMusic(){
  const title = document.getElementById("title").value;
  const cat = document.getElementById("category").value;
  const coverFile = document.getElementById("cover").files[0];
  const musicFile = document.getElementById("music").files[0];

  if(!title || !coverFile || !musicFile){
    alert("T√ºm alanlarƒ± doldur");
    return;
  }

  const coverUrl = await uploadFile(coverFile);
  const musicUrl = await uploadFile(musicFile);

  musics.push({ title:title, category:cat, cover:coverUrl, url:musicUrl});
  saveMusics();
  renderMusics();

  alert("M√ºzik eklendi ‚úÖ");
}

function deleteMusic(i){
  if(confirm("Silmek istediƒüine emin misin?")){
    musics.splice(i,1);
    saveMusics();
    renderMusics();
  }
}

function editMusic(i){
  const yeniAd = prompt("Yeni m√ºzik adƒ±:", musics[i].title);
  if(yeniAd) musics[i].title = yeniAd;

  saveMusics();
  renderMusics();
}

renderMusics();
</script>
</body>
  </html>
